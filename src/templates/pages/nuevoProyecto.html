<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Community - Nuevo Proyecto</title>
    <link rel="stylesheet" href="/src/static/styles/style.css">
    <link rel="stylesheet" href="/src/static/styles/css/nuevoProyecto.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <header>
        <div class="logo">
            <i class="fas fa-hands-helping"></i>
            <h1><a href="/inicio" style="text-decoration: none; color: inherit;">Community</a></h1>
        </div>
        <p>Uniendo donantes con causas importantes</p>
    </header>

    <nav class="nav">
        <a href="/inicio" data-tooltip="Página principal del sitio"><i class="fas fa-home"></i> Inicio</a>
        <a href="/proyectos" data-tooltip="Explora todos los proyectos disponibles" class="active"><i class="fas fa-project-diagram"></i> Proyectos</a>
        <a href="/organizaciones" data-tooltip="Conoce las organizaciones que están haciendo la diferencia"><i class="fas fa-building"></i> Organizaciones</a>
        <a href="/donar" data-tooltip="Contribuye a las causas que te importan"><i class="fas fa-donate"></i> Donar</a>
        <a href="/perfil" data-tooltip="Gestiona tu perfil y tus donaciones"><i class="fas fa-user"></i> Mi Perfil</a>
        <a href="/recibir" data-tooltip="Conecta con quienes ofrecen ayudas"><i class="fas fa-hand-holding-heart"></i> Recibir</a>
    </nav>

    <main class="container">
        {% if not session.logged_in %}
        <div class="alert alert-warning">
            <p>Debes iniciar sesión para crear un nuevo proyecto.</p>
        </div>
        {% endif %}
        <div class="form-container">
            <div class="card">
                <div class="card-header">
                    <a href="/proyectos" class="btn-regresar">
                        <i class="fas fa-arrow-left"></i>
                    </a>
                    <h2><i class="fas fa-project-diagram"></i> Crear Nuevo Proyecto</h2>
                </div>
                
                <form id="proyectoForm" method="POST" action="/api/proyectos" enctype="multipart/form-data">
                    <div class="form-group">
                        <label for="titulo"><i class="fas fa-heading"></i> Título del Proyecto *</label>
                        <input type="text" id="titulo" class="form-control" name="titulo" required>
                    </div>

                    <div class="form-group">
                        <label for="descripcion"><i class="fas fa-align-left"></i> Descripción *</label>
                        <textarea id="descripcion" class="form-control" name="descripcion" rows="3" required></textarea>
                    </div>

                    <div class="form-group">
                        <label for="meta_financiera"><i class="fas fa-dollar-sign"></i> Meta Financiera *</label>
                        <input type="number" id="meta_financiera" class="form-control" name="meta_financiera" step="0.01" required>
                    </div>

                    <div class="form-group">
                        <label for="categoria"><i class="fas fa-tag"></i> Categoría *</label>
                        <select id="categoria" class="form-control" name="categoria" required>
                            <option value="">Seleccione una categoría</option>
                            <option value="educacion">Educación</option>
                            <option value="salud">Salud</option>
                            <option value="ambiente">Medio Ambiente</option>
                            <option value="tecnologia">Tecnología</option>
                            <option value="cultura">Cultura</option>
                            <option value="deporte">Deporte</option>
                            <option value="social">Social</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="imagen"><i class="fas fa-image"></i> Imagen del Proyecto *</label>
                        <input type="file" id="imagen" class="form-control" name="imagen" accept="image/*" required>
                        <div id="imagen-preview" class="image-preview"></div>
                    </div>

                    <div class="form-group">
                        <label for="fecha_inicio"><i class="fas fa-calendar-alt"></i> Fecha de Inicio *</label>
                        <input type="date" id="fecha_inicio" class="form-control" name="fecha_inicio" required>
                    </div>

                    <div class="form-group">
                        <label for="fecha_fin"><i class="fas fa-calendar-check"></i> Fecha de Finalización *</label>
                        <input type="date" id="fecha_fin" class="form-control" name="fecha_fin" required>
                    </div>

                    <div class="form-group">
                        <label for="estado"><i class="fas fa-info-circle"></i> Estado *</label>
                        <select id="estado" class="form-control" name="estado" required>
                            <option value="activo">Activo</option>
                            <option value="pendiente">Pendiente</option>
                            <option value="finalizado">Finalizado</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="organizacion"><i class="fas fa-building"></i> Organización *</label>
                        <select id="organizacion" class="form-control" name="organizaciones_id_organizacion" required>
                            <!-- Las organizaciones se cargarán dinámicamente -->
                        </select>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="window.location.href='/proyectos'">
                            <i class="fas fa-times"></i> Cancelar
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Crear Proyecto
                        </button>
                    </div>
                </form>
                <div id="mensaje-respuesta"></div>
            </div>
        </div>
    </main>

    <footer>
        <p>&copy; 2024 Community. Todos los derechos reservados.</p>
    </footer>

    <script src="/src/static/scripts/js/nuevoProyecto.js"></script>
</body>
</html>